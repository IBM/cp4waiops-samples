{"version":3,"file":"FilterViewAPI.js","names":["tenantId","FILTERS_QUERY","VIEWS_QUERY","getQueries","options","indexOf","query","FilterViewAPI","type","constructor","getData","filterId","variables","condition","viewType","GQL_API_PATH","res","errorCheck","fetch","method","headers","body","JSON","stringify","json","_default","_exports","default"],"sources":["../../ext/common/FilterViewAPI.js"],"sourcesContent":["/* ******************************************************** {COPYRIGHT-TOP} ****\n * IBM Confidential\n * 5725-Q09, 5737-M96\n * Â© Copyright IBM Corp. 2024\n ********************************************************* {COPYRIGHT-END} ****/\nimport { errorCheck } from './apiErrorCheck';\n\nconst tenantId = 'cfd95b7e-3bc7-4006-a4a8-a73a79c71255';\nconst FILTERS_QUERY = `filters(condition: $condition) {\n  id\n  name\n  description\n  type\n  conditionSet {\n    operator\n    conditions\n  }\n}`;\n\nconst VIEWS_QUERY = `views(viewType: $viewType) {\n  id\n  name\n  description\n  type\n}`;\n\nfunction getQueries(options) {\n  if (options.indexOf('filter') !== -1 && options.indexOf('view') !== -1) {\n    return {\n      query: `\n        query($tenantId: ID! $condition: String $viewType: String) {\n          tenant(id: $tenantId) {\n            ${FILTERS_QUERY}\n            ${VIEWS_QUERY}\n          }\n        }\n      `\n    };\n  }\n  if (options.indexOf('filter') !== -1 && options.indexOf('view') === -1) {\n    return {\n      query: `\n        query($tenantId: ID! $condition: String) {\n          tenant(id: $tenantId) {\n            ${FILTERS_QUERY}\n          }\n        }\n      `\n    };\n  }\n  if (options.indexOf('filter') === -1 && options.indexOf('view') !== -1) {\n    return {\n      query: `\n        query($tenantId: ID! $viewType: String) {\n          tenant(id: $tenantId) {\n            ${VIEWS_QUERY}\n          }\n        }\n      `\n    };\n  }\n}\n\nclass FilterViewAPI {\n  // options can contain 'filter' and 'view' as options\n  options = []\n  // type can be either 'alert' or 'story\n  type = null\n\n  constructor({options, type}) {\n    this.options = options;\n    this.type = type;\n  }\n\n  async getData(filterId) {\n    const variables = {\n      tenantId,\n      condition: `type = '${this.type}'`,\n      viewType: this.type\n    };\n    if (filterId) {\n      variables.condition = `type = '${this.type}' AND id = '${filterId}'`;\n    }\n\n    const GQL_API_PATH = '/api/p/hdm_ea_uiapi';\n    const res = await errorCheck(fetch(GQL_API_PATH, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        ...getQueries(this.options),\n        variables\n      })\n    }));\n\n    return await res.json();\n  }\n}\n\nexport default FilterViewAPI;\n"],"mappings":";;;;;;;EAAA;AACA;AACA;AACA;AACA;;EAGA,MAAMA,QAAQ,GAAG,sCAAsC;EACvD,MAAMC,aAAa,GAAI;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;EAEF,MAAMC,WAAW,GAAI;AACrB;AACA;AACA;AACA;AACA,EAAE;EAEF,SAASC,UAAUA,CAACC,OAAO,EAAE;IAC3B,IAAIA,OAAO,CAACC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAID,OAAO,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;MACtE,OAAO;QACLC,KAAK,EAAG;AACd;AACA;AACA,cAAcL,aAAc;AAC5B,cAAcC,WAAY;AAC1B;AACA;AACA;MACI,CAAC;IACH;IACA,IAAIE,OAAO,CAACC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAID,OAAO,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;MACtE,OAAO;QACLC,KAAK,EAAG;AACd;AACA;AACA,cAAcL,aAAc;AAC5B;AACA;AACA;MACI,CAAC;IACH;IACA,IAAIG,OAAO,CAACC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAID,OAAO,CAACC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;MACtE,OAAO;QACLC,KAAK,EAAG;AACd;AACA;AACA,cAAcJ,WAAY;AAC1B;AACA;AACA;MACI,CAAC;IACH;EACF;EAEA,MAAMK,aAAa,CAAC;IAClB;IACAH,OAAO,GAAG,EAAE;IACZ;IACAI,IAAI,GAAG,IAAI;IAEXC,WAAWA,CAAC;MAACL,OAAO;MAAEI;IAAI,CAAC,EAAE;MAC3B,IAAI,CAACJ,OAAO,GAAGA,OAAO;MACtB,IAAI,CAACI,IAAI,GAAGA,IAAI;IAClB;IAEA,MAAME,OAAOA,CAACC,QAAQ,EAAE;MACtB,MAAMC,SAAS,GAAG;QAChBZ,QAAQ;QACRa,SAAS,EAAG,WAAU,IAAI,CAACL,IAAK,GAAE;QAClCM,QAAQ,EAAE,IAAI,CAACN;MACjB,CAAC;MACD,IAAIG,QAAQ,EAAE;QACZC,SAAS,CAACC,SAAS,GAAI,WAAU,IAAI,CAACL,IAAK,eAAcG,QAAS,GAAE;MACtE;MAEA,MAAMI,YAAY,GAAG,qBAAqB;MAC1C,MAAMC,GAAG,GAAG,MAAM,IAAAC,yBAAU,EAACC,KAAK,CAACH,YAAY,EAAE;QAC/CI,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnB,GAAGpB,UAAU,CAAC,IAAI,CAACC,OAAO,CAAC;UAC3BQ;QACF,CAAC;MACH,CAAC,CAAC,CAAC;MAEH,OAAO,MAAMI,GAAG,CAACQ,IAAI,CAAC,CAAC;IACzB;EACF;EAAC,IAAAC,QAAA,GAAAC,QAAA,CAAAC,OAAA,GAEcpB,aAAa;AAAA","ignoreList":[]}